#!/bin/bash

#Hive

dbname=hive
postgres=postgres
user=hive
passwd=hive
echo "CREATE DATABASE $dbname;" | su - $postgres -c "psql -U postgres"
echo "CREATE USER $user WITH PASSWORD '$passwd';" | su - $postgres -c "psql -U postgres"
echo "GRANT ALL PRIVILEGES ON DATABASE $dbname TO $user;" | su - $postgres -c "psql -U postgres"

#Oozie

dbname=oozie
postgres=postgres
user=oozie
passwd=oozie
echo "CREATE DATABASE $dbname;" | su - $postgres -c "psql -U postgres"
echo "CREATE USER $user WITH PASSWORD '$passwd';" | su - $postgres -c "psql -U postgres"
echo "GRANT ALL PRIVILEGES ON DATABASE $dbname TO $user;" | su - $postgres -c "psql -U postgres"

#Ranger

dbname=ranger
postgres=postgres
user=rangeradmin
passwd=ranger
echo "CREATE DATABASE $dbname;" | su - $postgres -c "psql -U postgres"
echo "CREATE USER $user WITH PASSWORD '$passwd';" | su - $postgres -c "psql -U postgres"
echo "GRANT ALL PRIVILEGES ON DATABASE $dbname TO $user;" | su - $postgres -c "psql -U postgres"

#Ranger KMS

dbname=rangerkms
postgres=postgres
user=rangerkms
passwd=ranger
echo "CREATE DATABASE $dbname;" | su - $postgres -c "psql -U postgres"
echo "CREATE USER $user WITH PASSWORD '$passwd';" | su - $postgres -c "psql -U postgres"
echo "GRANT ALL PRIVILEGES ON DATABASE $dbname TO $user;" | su - $postgres -c "psql -U postgres"

#Druid and SupersetMetadata

dbname=druid
postgres=postgres
user=druid
passwd=druid
echo "CREATE DATABASE $dbname;" | su - $postgres -c "psql -U postgres"
echo "CREATE USER $user WITH PASSWORD '$passwd';" | su - $postgres -c "psql -U postgres"
echo "GRANT ALL PRIVILEGES ON DATABASE $dbname TO $user;" | su - $postgres -c "psql -U postgres"

dbname=superset
postgres=postgres
user=superset
passwd=superset
echo "CREATE DATABASE $dbname;" | su - $postgres -c "psql -U postgres"
echo "CREATE USER $user WITH PASSWORD '$passwd';" | su - $postgres -c "psql -U postgres"
echo "GRANT ALL PRIVILEGES ON DATABASE $dbname TO $user;" | su - $postgres -c "psql -U postgres"
echo "alter user $user superuser;" | su - $postgres -c "psql -U postgres"



